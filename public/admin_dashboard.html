<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Study Buddy - DSS Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --primary: #5856D6; --bg: #0f172a; --card: #1e293b; --text: #f8fafc; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }
        .navbar { background: var(--card); padding: 0 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--primary); height: 50px; flex-shrink: 0; }
        .nav-links button { background: #334155; border: none; color: white; padding: 8px 15px; margin-left: 5px; border-radius: 6px; cursor: pointer; font-size: 13px; transition: 0.3s; }
        .nav-links button.active { background: var(--primary); box-shadow: 0 0 10px var(--primary); }
        .back-home { color: #94a3b8; text-decoration: none; font-size: 13px; font-weight: bold; }
        .container { flex: 1; padding: 15px; display: none; flex-direction: column; overflow: hidden; }
        .container.active { display: flex; }
        .slicer-bar { background: #1e293b; padding: 10px; border-radius: 8px; margin-bottom: 12px; display: flex; align-items: center; gap: 15px; font-size: 13px; border: 1px solid #334155; flex-shrink: 0; }
        .info-icon { cursor: pointer; background: var(--primary); color: white; border-radius: 50%; width: 20px; height: 20px; display: inline-flex; align-items: center; justify-content: center; font-size: 12px; position: relative; }
        .tooltip-text { visibility: hidden; width: 250px; background: #334155; color: #fff; text-align: center; border-radius: 6px; padding: 10px; position: absolute; z-index: 100; top: 130%; left: 0; opacity: 0; transition: 0.3s; font-size: 11px; border: 1px solid var(--primary); }
        .info-icon:hover .tooltip-text { visibility: visible; opacity: 1; }
        .kpi-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 12px; height: 75px; flex-shrink: 0; }
        .kpi-card { background: var(--card); border-radius: 10px; border: 1px solid #334155; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .kpi-card h3 { font-size: 11px; margin: 0; color: #94a3b8; text-transform: uppercase; }
        .kpi-card p { font-size: 20px; margin: 4px 0 0; font-weight: bold; color: var(--primary); }
        .charts-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; flex: 1; min-height: 0; }
        .chart-item { background: var(--card); border-radius: 10px; padding: 15px; border: 1px solid #334155; display: flex; flex-direction: column; min-height: 0; }
        .chart-item h4 { font-size: 13px; margin: 0 0 10px 0; text-align: center; color: #cbd5e1; }
        canvas { flex: 1 !important; width: 100% !important; height: 100% !important; }
        select { background: #334155; color: white; border: 1px solid var(--primary); border-radius: 4px; padding: 4px; font-size: 12px; }
    </style>
</head>
<body>

<nav class="navbar">
    <a href="/" class="back-home">‚Üê Back to Home</a>
    <div class="nav-links">
        <button class="active" onclick="switchTab('ceo')">CEO (Strategic)</button>
        <button onclick="switchTab('manager')">Manager (Operational)</button>
        <button onclick="switchTab('analyst')">Analyst (Analytical)</button>
    </div>
</nav>

<div id="ceo" class="container active">
    <div class="slicer-bar">
        Select Year: <select id="ceoYear" onchange="updateCEO()"><option value="2024">2024</option><option value="2023">2023</option></select>
        <div class="info-icon">! <span class="tooltip-text">Why? CEO needs high-level focus on yearly growth and regional intervention.</span></div>
    </div>
    <div class="kpi-row">
        <div class="kpi-card"><h3>Total Sales</h3><p id="ceo-sales">$2.4M</p></div>
        <div class="kpi-card"><h3>Total Profit</h3><p id="ceo-profit">$840K</p></div>
        <div class="kpi-card"><h3>YoY Growth</h3><p id="ceo-growth">+18%</p></div>
    </div>
    <div class="charts-grid">
        <div class="chart-item"><h4>Sales Trend over Years</h4><canvas id="c_ceo1"></canvas></div>
        <div class="chart-item"><h4>Profit by Region</h4><canvas id="c_ceo2"></canvas></div>
    </div>
</div>

<div id="manager" class="container">
    <div class="slicer-bar">
        Region: <select id="mgrReg" onchange="updateMGR()"><option value="Global">Global</option><option value="Local">Local</option></select>
        Month: <select id="mgrMon" onchange="updateMGR()"><option>Dec</option><option>Nov</option></select>
        <div class="info-icon">! <span class="tooltip-text">Why? Manager needs real-time monitoring of monthly targets and product performance.</span></div>
    </div>
    <div class="kpi-row" style="grid-template-columns: repeat(2, 1fr);">
        <div class="kpi-card"><h3>Monthly Sales</h3><p id="mgr-sales">$125K</p></div>
        <div class="kpi-card"><h3>Target vs Actual</h3><p id="mgr-target">92%</p></div>
    </div>
    <div class="charts-grid">
        <div class="chart-item"><h4>Sales by Product</h4><canvas id="c_mgr1"></canvas></div>
        <div class="chart-item"><h4>Profit by Segment</h4><canvas id="c_mgr2"></canvas></div>
        <div class="chart-item"><h4>Discount vs Profit</h4><canvas id="c_mgr3"></canvas></div>
        <div class="chart-item"><h4>Sales by Country</h4><canvas id="c_mgr4"></canvas></div>
    </div>
</div>

<div id="analyst" class="container">
    <div class="slicer-bar">
        Model Analysis: <select id="anlMod" onchange="updateANL()"><option value="A">Standard</option><option value="B">Aggressive</option></select>
        <div class="info-icon">! <span class="tooltip-text">Why? Analyst explores correlations between manufacturing costs and sales for strategy.</span></div>
    </div>
    <div class="charts-grid">
        <div class="chart-item"><h4>Sales vs Profit</h4><canvas id="c_anl1"></canvas></div>
        <div class="chart-item"><h4>Mfg Cost vs Sales</h4><canvas id="c_anl2"></canvas></div>
        <div class="chart-item"><h4>Profit Matrix (Country/Segment)</h4><canvas id="c_anl3"></canvas></div>
        <div class="chart-item"><h4>Trend by Segment</h4><canvas id="c_anl4"></canvas></div>
    </div>
</div>

<script>
    let charts = {};
    const baseOpt = { 
        responsive: true, maintainAspectRatio: false, 
        layout: { padding: { bottom: 10 } },
        scales: { y: { beginAtZero: true, ticks: {font: {size: 10}} }, x: { ticks: {font: {size: 10}} } },
        plugins: { legend: { display: false } }
    };

    function switchTab(id) {
        document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.nav-links button').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    // CEO LOGIC
    function updateCEO() {
        const yr = document.getElementById('ceoYear').value;
        const d = yr === '2024' ? {s: '$2.4M', p: '$840K', g: '+18%', ds1: [1.2, 1.8, 2.4], ds2: [400, 300, 200, 150]} : {s: '$1.5M', p: '$500K', g: '+12%', ds1: [0.9, 1.2, 1.5], ds2: [250, 200, 150, 100]};
        document.getElementById('ceo-sales').innerText = d.s;
        document.getElementById('ceo-profit').innerText = d.p;
        document.getElementById('ceo-growth').innerText = d.g;
        charts.ceo1.data.datasets[0].data = d.ds1; charts.ceo1.update();
        charts.ceo2.data.datasets[0].data = d.ds2; charts.ceo2.update();
    }
    charts.ceo1 = new Chart(document.getElementById('c_ceo1'), { type: 'line', data: { labels: ['2022','2023','2024'], datasets: [{data:[1.2,1.8,2.4], borderColor:'#5856D6'}] }, options: baseOpt });
    charts.ceo2 = new Chart(document.getElementById('c_ceo2'), { type: 'bar', data: { labels: ['NA','EU','AS','LA'], datasets: [{data:[400,300,200,150], backgroundColor:'#34d399'}] }, options: baseOpt });

    // MANAGER LOGIC
    function updateMGR() {
        const reg = document.getElementById('mgrReg').value;
        const d = reg === 'Global' ? {s: '$125K', t: '92%', d1: [500,800,450], d2: [50,30,40]} : {s: '$65K', t: '85%', d1: [200,400,250], d2: [25,15,20]};
        document.getElementById('mgr-sales').innerText = d.s;
        document.getElementById('mgr-target').innerText = d.t;
        charts.m1.data.datasets[0].data = d.d1; charts.m1.update();
        charts.m2.data.datasets[0].data = d.d2; charts.m2.update();
    }
    charts.m1 = new Chart(document.getElementById('c_mgr1'), { type: 'bar', data: { labels: ['Velo','Ama','Mon'], datasets: [{data:[500,800,450], backgroundColor:'#fbbf24'}] }, options: baseOpt });
    charts.m2 = new Chart(document.getElementById('c_mgr2'), { type: 'bar', data: { labels: ['Gov','SME','Ent'], datasets: [{data:[50,30,40], backgroundColor:'#818cf8'}] }, options: baseOpt });
    charts.m3 = new Chart(document.getElementById('c_mgr3'), { type: 'scatter', data: { datasets: [{data:[{x:5,y:50},{x:15,y:20},{x:25,y:5}], backgroundColor:'#f87171'}] }, options: baseOpt });
    charts.m4 = new Chart(document.getElementById('c_mgr4'), { type: 'bar', data: { labels: ['US','CA','FR','UK','GE'], datasets: [{data:[1000,600,400,300,200], backgroundColor:'#5856D6'}] }, options: baseOpt });

    // ANALYST LOGIC
    function updateANL() {
        const m = document.getElementById('anlMod').value;
        const d = m === 'A' ? [{x:100,y:20},{x:150,y:40}] : [{x:200,y:60},{x:300,y:90}];
        charts.a1.data.datasets[0].data = d; charts.a1.update();
    }
    charts.a1 = new Chart(document.getElementById('c_anl1'), { type: 'scatter', data: { datasets: [{data:[{x:100,y:20},{x:150,y:40}], backgroundColor:'#34d399'}] }, options: baseOpt });
    charts.a2 = new Chart(document.getElementById('c_anl2'), { type: 'scatter', data: { datasets: [{data:[{x:50,y:100},{x:80,y:150}], backgroundColor:'#fbbf24'}] }, options: baseOpt });
    charts.a3 = new Chart(document.getElementById('c_anl3'), { type: 'bar', data: { labels: ['US-G','US-E','CA-G'], datasets: [{data:[40,35,20], backgroundColor:'#818cf8'}] }, options: baseOpt });
    charts.a4 = new Chart(document.getElementById('c_anl4'), { type: 'line', data: { labels: ['W1','W2','W3'], datasets: [{data:[40,60,80], borderColor:'#5856D6'}] }, options: baseOpt });
</script>
</body>
</html>
