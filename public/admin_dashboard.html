<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Study Buddy - Modern DSS Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { 
            --bg: #0b0e14; --card: #161b22; --primary: #bc6ff1; 
            --secondary: #21e6c1; --accent: #ff007f; --text: #e6edf3; 
        }
        body { 
            font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); 
            margin: 0; height: 100vh; overflow: hidden; display: flex; flex-direction: column; 
        }
        
        /* Navbar Styling */
        .navbar { 
            background: var(--card); padding: 0 25px; display: flex; justify-content: space-between; 
            align-items: center; border-bottom: 1px solid #30363d; height: 55px; flex-shrink: 0; 
        }
        .nav-links button { 
            background: transparent; border: 1px solid #30363d; color: var(--text); 
            padding: 8px 18px; margin-left: 8px; border-radius: 20px; cursor: pointer; 
            font-size: 13px; transition: all 0.3s ease; 
        }
        .nav-links button.active { 
            background: linear-gradient(45deg, var(--primary), var(--accent)); 
            border: none; box-shadow: 0 0 15px rgba(188, 111, 241, 0.4); 
        }

        /* Container & Slicers */
        .container { flex: 1; padding: 15px; display: none; flex-direction: column; overflow: hidden; }
        .container.active { display: flex; }
        .slicer-bar { 
            background: rgba(22, 27, 34, 0.8); padding: 12px; border-radius: 12px; 
            margin-bottom: 15px; display: flex; align-items: center; gap: 15px; 
            font-size: 13px; border: 1px solid #30363d; 
        }

        /* KPI Cards with Hover Effect */
        .kpi-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 15px; height: 100px; }
        .kpi-card { 
            background: var(--card); border-radius: 15px; border: 1px solid #30363d; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            position: relative; overflow: hidden;
        }
        .kpi-card:hover { 
            transform: translateY(-5px); border-color: var(--primary); 
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), 0 0 10px rgba(188, 111, 241, 0.2); 
        }
        .kpi-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
            background: linear-gradient(to bottom, var(--primary), var(--accent));
        }
        .kpi-card h3 { font-size: 11px; margin: 0; color: #8b949e; text-transform: uppercase; letter-spacing: 1px; }
        .kpi-card p { font-size: 24px; margin: 5px 0 0; font-weight: bold; background: linear-gradient(to right, #fff, #bc6ff1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        /* Charts Grid & Items */
        .charts-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; flex: 1; min-height: 0; }
        .chart-item { 
            background: var(--card); border-radius: 15px; padding: 20px; border: 1px solid #30363d; 
            display: flex; flex-direction: column; min-height: 0; transition: border-color 0.3s ease;
        }
        .chart-item:hover { border-color: var(--secondary); }
        .chart-item h4 { font-size: 14px; margin: 0 0 15px 0; color: #f0f6fc; font-weight: 500; }
        
        select { background: #0d1117; color: white; border: 1px solid #30363d; border-radius: 8px; padding: 5px 10px; cursor: pointer; }
    </style>
</head>
<body>

<nav class="navbar">
    <div style="font-weight: bold; color: var(--primary); font-size: 18px;">STUDY BUDDY <span style="color: var(--secondary);">DSS</span></div>
    <div class="nav-links">
        <button class="active" onclick="switchTab('ceo')">CEO Dashboard</button>
        <button onclick="switchTab('manager')">Manager Dashboard</button>
        <button onclick="switchTab('analyst')">Analyst Dashboard</button>
    </div>
    <a href="/" class="nav-links" style="text-decoration:none"><button>Back to App</button></a>
</nav>

<div id="ceo" class="container active">
    <div class="slicer-bar">
        Year Filter: <select id="ceoYear" onchange="updateCEO()"><option value="2024">2024</option><option value="2023">2023</option></select>
    </div>
    <div class="kpi-row">
        <div class="kpi-card"><h3>Total Sales</h3><p id="cs">$2.4M</p></div>
        <div class="kpi-card"><h3>Total Profit</h3><p id="cp">$840K</p></div>
        <div class="kpi-card"><h3>YoY Growth</h3><p id="cg">+18.5%</p></div>
    </div>
    <div class="charts-grid">
        <div class="chart-item"><h4>Sales Trend over Years</h4><canvas id="ceo_line"></canvas></div>
        <div class="chart-item"><h4>Profit by Region (Multi-Color)</h4><canvas id="ceo_bar"></canvas></div>
    </div>
</div>

<div id="manager" class="container">
    <div class="slicer-bar">
        Region: <select id="mReg" onchange="updateMGR()"><option value="Global">Global</option><option value="North">North America</option></select>
        Month: <select id="mMon" onchange="updateMGR()"><option value="Dec">December</option><option value="Nov">November</option></select>
    </div>
    <div class="kpi-row" style="grid-template-columns: repeat(2, 1fr);">
        <div class="kpi-card"><h3>Monthly Sales</h3><p id="ms">$125,000</p></div>
        <div class="kpi-card"><h3>Target vs Actual</h3><p id="mt">94.2%</p></div>
    </div>
    <div class="charts-grid">
        <div class="chart-item"><h4>Sales by Product</h4><canvas id="mgr_bar1"></canvas></div>
        <div class="chart-item"><h4>Profit by Segment</h4><canvas id="mgr_bar2"></canvas></div>
        <div class="chart-item"><h4>Discount vs Profit</h4><canvas id="mgr_scatter"></canvas></div>
        <div class="chart-item"><h4>Sales by Country</h4><canvas id="mgr_map"></canvas></div>
    </div>
</div>

<div id="analyst" class="container">
    <div class="slicer-bar">
        Scenario: <select id="aMod" onchange="updateANL()"><option value="A">Baseline</option><option value="B">Aggressive Growth</option></select>
    </div>
    <div class="charts-grid">
        <div class="chart-item"><h4>Sales vs Profit Correlation</h4><canvas id="an_s1"></canvas></div>
        <div class="chart-item"><h4>Mfg Cost Impact on Sales</h4><canvas id="an_s2"></canvas></div>
        <div class="chart-item"><h4>Country/Segment Matrix</h4><canvas id="an_b"></canvas></div>
        <div class="chart-item"><h4>Trend by Segment</h4><canvas id="an_l"></canvas></div>
    </div>
</div>

<script>
    let charts = {};
    Chart.defaults.color = '#8b949e';
    Chart.defaults.font.family = 'Inter';

    const commonOptions = {
        responsive: true, maintainAspectRatio: false,
        plugins: { legend: { display: false } },
        scales: { 
            y: { beginAtZero: true, grid: { color: 'rgba(255,255,255,0.05)' } },
            x: { grid: { display: false } }
        }
    };

    function switchTab(id) {
        document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.nav-links button').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    // CEO Charts [cite: 9, 10, 11]
    charts.ceo1 = new Chart(document.getElementById('ceo_line'), {
        type: 'line',
        data: { labels: ['2021','2022','2023','2024'], datasets: [{ label: 'Sales', data: [1.2, 1.5, 2.1, 2.4], borderColor: '#bc6ff1', tension: 0.4, fill: true, backgroundColor: 'rgba(188, 111, 241, 0.1)' }] },
        options: commonOptions
    });
    // Profit by Region - Multi Color 
    charts.ceo2 = new Chart(document.getElementById('ceo_bar'), {
        type: 'bar',
        data: { 
            labels: ['North Am', 'Europe', 'Asia', 'LATAM'], 
            datasets: [{ 
                data: [450, 320, 280, 190], 
                backgroundColor: ['#21e6c1', '#bc6ff1', '#ff007f', '#3d5af1'],
                borderRadius: 8
            }] 
        },
        options: commonOptions
    });

    // Manager Charts [cite: 20, 21, 22, 23, 24]
    charts.mgr1 = new Chart(document.getElementById('mgr_bar1'), { type: 'bar', data: { labels: ['Velo','Amarilla','Montana'], datasets: [{ data:[300,450,200], backgroundColor: '#21e6c1' }] }, options: commonOptions });
    charts.mgr2 = new Chart(document.getElementById('mgr_bar2'), { type: 'bar', data: { labels: ['Gov','SME','Ent'], datasets: [{ data:[120,80,150], backgroundColor: '#bc6ff1' }] }, options: commonOptions });
    charts.mgr3 = new Chart(document.getElementById('mgr_scatter'), { type: 'scatter', data: { datasets: [{ data:[{x:5,y:50},{x:15,y:20}], backgroundColor: '#ff007f' }] }, options: commonOptions });
    charts.mgr4 = new Chart(document.getElementById('mgr_map'), { type: 'bar', data: { labels: ['USA','CAN','FRA','GER'], datasets: [{ data:[800,400,300,250], backgroundColor: '#3d5af1' }] }, options: commonOptions });

    // Analyst Charts [cite: 33, 34, 35, 36]
    charts.anl1 = new Chart(document.getElementById('an_s1'), { type: 'scatter', data: { datasets: [{ data:[{x:10,y:20},{x:40,y:80}], backgroundColor: '#21e6c1' }] }, options: commonOptions });
    charts.anl2 = new Chart(document.getElementById('an_s2'), { type: 'scatter', data: { datasets: [{ data:[{x:5,y:100},{x:15,y:250}], backgroundColor: '#ff007f' }] }, options: commonOptions });
    charts.anl3 = new Chart(document.getElementById('an_b'), { type: 'bar', data: { labels: ['US-Gov','US-Ent','CA-Gov'], datasets: [{ data:[45,30,25], backgroundColor: '#bc6ff1' }] }, options: commonOptions });
    charts.anl4 = new Chart(document.getElementById('an_l'), { type: 'line', data: { labels: ['Jan','Feb','Mar'], datasets: [{ data:[20,50,40], borderColor: '#21e6c1', tension: 0.3 }] }, options: commonOptions });

    // Slicers Interaction Logic [cite: 12, 25, 37]
    function updateCEO() {
        const val = document.getElementById('ceoYear').value;
        const factor = val === '2024' ? 1 : 0.7;
        document.getElementById('cs').innerText = val === '2024' ? '$2.4M' : '$1.7M';
        charts.ceo1.data.datasets[0].data = [1.2, 1.5, 2.1, 2.4].map(x => x * factor);
        charts.ceo1.update();
        charts.ceo2.data.datasets[0].data = [450, 320, 280, 190].map(x => x * factor);
        charts.ceo2.update();
    }

    function updateMGR() {
        const reg = document.getElementById('mReg').value;
        const factor = reg === 'Global' ? 1 : 0.6;
        document.getElementById('ms').innerText = reg === 'Global' ? '$125,000' : '$75,000';
        charts.mgr1.data.datasets[0].data = [300, 450, 200].map(x => x * factor);
        charts.mgr1.update();
        charts.mgr2.data.datasets[0].data = [120, 80, 150].map(x => x * factor);
        charts.mgr2.update();
        charts.mgr4.data.datasets[0].data = [800, 400, 300, 250].map(x => x * factor);
        charts.mgr4.update();
    }

    function updateANL() {
        const mod = document.getElementById('aMod').value;
        const factor = mod === 'A' ? 1 : 1.4;
        charts.anl1.data.datasets[0].data = [{x:10*f,y:20*f},{x:40*f,y:80*f}];
        charts.anl1.update();
        charts.anl3.data.datasets[0].data = [45, 30, 25].map(x => x * factor);
        charts.anl3.update();
    }
</script>
</body>
</html>
